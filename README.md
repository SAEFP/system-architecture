# system-architecture

<img src="./images/System Architecture.png" alt="System Architecture.png" width="700"/>

A Meta Quest Pro HMD displays the VR environment generated by the Unreal Engine (v5.3) on Windows 10. The HMD connects to the computer via Air link through Meta Quest Link PC app by local Wi-Fi network.

The Oculus Quest Pro HMD records the eye movement data with the built-in eye tracking feature and records the position and orientation of the HMD. 

The etee VR hand controllers are lightweight and slide and clip onto hands and enabling a more natural handshake with an open hand position. They track and record finger position, orientation and movements with finger pressure applied to controller and provide tactile feedback to greatly enhance the immersion . To use the etee VR controller with the Oculus Meta Quest Pro HMD Vive Ultimate tarckers are used. 

EEG data will be recorded in real-time with 32-channel mobile EEG system (ANT Neuro eegosports), sampling at a 500 Hz sampling rate via a mobile EEG cap and an amplifier. Data will be recorded by a USB connected tablet which is monitored via PC remote control through the local Wi-Fi network. 

For physiological measurements, EmotiBit records real-time HR, HRV, EDA and respiration data.

The experiment uses Lab Streaming Layer (LSL) (https://labstreaminglayer.org). LSL records and synchronizes multiple data streams including EEG data, physiological data from EmotiBit, finger pressure and position and orientation data from etee VR controllers and position and orientation of the HMD which is also used for maintaining eye contact with VA. Multiple devices send real-time data streams to LSL for data recording. To mark the scene onset and synchronise multiple data streams, markers are sent from Unreal Engine to LSL with an LSL plugin through local Wi-Fi network.

Four LSL outlets were integrated to Unreal Engine. One for event markers and three for the position and orientation of the HMD, right controller and left controller. The position and orientation outlets have three channels, each with x, y and z coordinates.

